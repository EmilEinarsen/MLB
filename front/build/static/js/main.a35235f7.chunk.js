(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{364:function(e,t,n){},367:function(e,t,n){},387:function(e,t,n){"use strict";n.r(t);var r,c=n(1),a=n(0),i=n(17),o=n.n(i),s=n(18),l=n.n(s),d=n(38),u=n(16),j=n(220),b=n(114),h=n(75),O=n.n(h),f=n(14),p="FETCH",m="RESPONSE",x="RESET",g=function(e,t){switch(t.type){case p:return Object(f.a)(Object(f.a)({},v),{},{pending:!0});case m:return Object(f.a)(Object(f.a)(Object(f.a)({},e),t.payload),{},{pending:!1});case x:return Object(f.a)({},v)}},v={pending:!1,value:null,error:null},y=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(a.useReducer)(g,v),r=Object(u.a)(n,2),c=r[0],i=r[1],o=Object(a.useCallback)(function(){var t=Object(d.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i({type:p}),t.prev=1,t.next=4,e(n);case 4:r=t.sent,i({type:m,payload:{value:r}}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),i({type:m,payload:{error:t.t0}});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(a.useEffect)((function(){t&&o()}),[o,t]),[c,o,{reset:function(){return i({type:x})}}]},C="http://localhost:3000/",k={DOC:{create:"doc/create",get:"doc/get",update:"doc/update",delete:"doc/delete",get_all:"doc/get_all"},IMG:{create:"img/create",delete:"img/delete"},COLLECTION:{create:"collection/create",get:"collection/get",update:"collection/update",delete:"collection/delete",get_all:"collection/get_all"},USER:{create:"user/create"},get_all:"",login:"login"},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{JSON:!0};return{method:"POST",headers:t.JSON?{"Content-Type":"application/json","Access-Control-Allow-Origin":!0,auth:O.a.get("token")}:{"Access-Control-Allow-Origin":!0,auth:O.a.get("token")},body:t.JSON?JSON.stringify(e):e}},S=function(e){return"".concat(C).concat(e)},F=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r,c,a,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.dest,r=t.payload,c=t.options,!r&&!c){e.next=7;break}return e.next=4,fetch(S(n),w(r,c));case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,fetch(S(n),{method:"GET",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":!0,auth:O.a.get("token")}});case 9:e.t0=e.sent;case 10:if((a=e.t0).ok){e.next=13;break}throw a;case 13:return e.prev=13,e.next=16,a.json();case 16:return(o=e.sent).token&&O.a.set("token",o.token),e.abrupt("return",null!==(i=o.content)&&void 0!==i?i:o);case 21:return e.prev=21,e.t1=e.catch(13),e.abrupt("return",a);case 24:case"end":return e.stop()}}),e,null,[[13,21]])})));return function(t){return e.apply(this,arguments)}}(),E=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return y(function(){var n=Object(d.a)(l.a.mark((function n(r){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,F({dest:e,payload:null!==r&&void 0!==r?r:t});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),n)},N=n(86),I=n(118),P={id:"",email:"",username:"",collections:[],docs:[]},T=function(e,t,n){var r=A(e),c=P[r].find((function(e){return e.id===t}));Object.assign(c,n),"collections"===r&&n.docIds&&(c.docs=n.docIds.map((function(e){return P.docs.find((function(t){return t.id===e}))})))},L=function(e,t){return T(k.DOC,e,Object(N.a)({},t,void 0))},A=function(e){return e===k.DOC?"docs":e===k.COLLECTION?"collections":""},z=P,q=function(){var e=Object(a.useRef)(!0),t=E(k.get_all,void 0,!1),n=Object(u.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){r.value&&Object.assign(z,r.value)}),[r.value]),e.current&&(e.current=!1,c()),[r,c]};!function(e){e[e.login=0]="login",e[e.register=1]="register",e[e.authorized=2]="authorized",e[e.loading=3]="loading"}(r||(r={}));var M,D=Object(a.createContext)(void 0),B=function(e){var t=e.children,n=Object(a.useState)(r.loading),i=Object(u.a)(n,2),o=i[0],s=i[1],h=Object(a.useRef)(),f=q(),p=Object(u.a)(f,2),m=p[0],x=p[1],g=E(k.login,void 0,!1),v=Object(u.a)(g,2),y=v[0],C=v[1],w=E(k.USER.create,void 0,!1),S=Object(u.a)(w,2),F=S[0],N=S[1],I=Object(b.a)({}),T=Object(u.a)(I,3),L=T[0],A=T[2],z=A.add,M=A.removeByKey,B=o===r.login?y:F;Object(a.useEffect)((function(){o!==r.authorized&&F&&(F.pending&&j.b.loading({content:"Pending...",key:"register"}),F.value&&(j.b.success({content:"Successful!",key:"register"}),s(r.login)),F.error&&(Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=z,e.next=3,F.error.json();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))(),j.b.error({content:"Error!",key:"register"})))}),[F]),Object(a.useEffect)((function(){o!==r.authorized&&(null===y||void 0===y?void 0:y.value)&&Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(s(r.loading),x()));case 1:case"end":return e.stop()}}),e)})))()}),[y]),Object(a.useEffect)((function(){m.pending||(m.error&&s(r.login),m.value&&s(r.authorized))}),[m]),Object(a.useEffect)((function(){o===r.loading&&(h.current=void 0)}),[o]);var R=function(){return s(r.login)},U=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 401===(null===t||void 0===t||null===(n=t.error)||void 0===n?void 0:n.status)&&R(),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsx)(D.Provider,{value:{authState:o,setAuthState:s,refMounted:h,submit:function(e){return o===r.login?C(e):N(e)},submitState:B,customErrors:L,removeError:M,unauthorize:R,checkAuthorization:U,logout:function(){return P.id="",P.email="",P.username="",P.collections=[],P.docs=[],O.a.destroy("token"),localStorage.clear(),R()}},children:t})},R=n(486),U=n(487),V=n(488),_=n(467),W=n(472),H=n(74),J=n(214),G=n(417),Y=n(418),K=Object(J.a)({overrides:{MuiCssBaseline:{"@global":{body:{height:"100vh",overflow:"hidden"},html:{height:"100vh",overflow:"hidden"},"*":{scrollbarWidth:"thin"},"::-webkit-scrollbar":{width:"6px",height:"6px"}}}}}),Q=function(e){var t=e.children;return Object(c.jsxs)(G.a,{theme:K,children:[Object(c.jsx)(Y.a,{}),t]})},X=n(133),Z=n(419),$=n(420),ee=n(421);!function(e){e[e.user=0]="user",e[e.selected=1]="selected",e[e.folder=2]="folder"}(M||(M={}));var te,ne=[{label:"Playlists",value:M.folder,icon:Object(c.jsx)(Z.a,{})},{label:"Song",value:M.selected,icon:Object(c.jsx)($.a,{})},{label:"User",value:M.user,icon:Object(c.jsx)(ee.a,{})}],re=M.folder,ce=Object(a.createContext)({page:re,setPage:function(){},pages:[]}),ae=function(e){var t=e.children,n=Object(b.b)("local","page",re),r=Object(u.a)(n,2),a=r[0],i=r[1];return Object(c.jsx)(ce.Provider,{value:{page:+a,setPage:i,pages:ne},children:t})},ie=n(48),oe=n(422);!function(e){e[e.up=0]="up",e[e.down=1]="down"}(te||(te={}));var se,le,de,ue,je=function(e){var t=e.size,n=void 0===t?"sm":t,r=e.d,c=void 0===r?te.down:r,a=Object(ie.a)();return Object(oe.a)(c===te.up?a.breakpoints.up(n):a.breakpoints.down(n))},be=Object(a.createContext)(void 0),he=function(e){var t=e.children,n=Object(a.useContext)(ce).setPage,r=Object(a.useState)(z),i=Object(u.a)(r,2),o=i[0],s=i[1],j=y(Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F({dest:k.get_all});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),!1),h=Object(u.a)(j,3),O=h[0],p=h[1],m=h[2].reset,x=function(){return s(Object(f.a)({},z))},g=Object(X.a)([]),v=Object(u.a)(g,3),C=v[0],w=v[2],S=w.add,E=w.removeByValue,N=w.clear,I=je({}),P=Object(b.b)("local","selectedFile"),T=Object(u.a)(P,2),L=T[0],A=T[1],q=Object(a.useState)(),D=Object(u.a)(q,2),B=D[0],R=D[1];return Object(a.useEffect)((function(){O.pending||(O.value&&(z.docs=O.value.docs,z.collections=O.value.collections,m(),x()),O.error&&m())}),[m,O]),Object(c.jsx)(be.Provider,{value:{files:o.docs,collections:o.collections,user:{username:o.username},hooks:{check:{checked:C,addCheck:S,removeCheckByValue:E,clearChecked:N},file:{selectedFile:L,setSelectedFile:function(e){A(e),I&&n(M.selected)}},collection:{selectedCollection:B,setSelectedCollection:R}},reload:p,rerender:x},children:t})},Oe=n(80),fe=n(471),pe=n(482),me=n(470),xe=n(423),ge=n(424),ve=n(466),ye=n(479),Ce=function(e){var t=e.url,n=Object(Oe.a)(e,["url"]);return Object(f.a)({url:C+t},n)},ke=function(e){var t=e.props,n=t.img,r=t.handleImgChange,a=t.index,i=t.label,o=t.music,s=t.handleMusicChange;return Object(c.jsxs)(xe.a,{gutter:12,children:[Object(c.jsxs)(ge.a,{span:12,style:{display:"grid",gap:"5px"},children:[Object(c.jsx)("label",{children:"Image:"}),Object(c.jsx)(ve.a,{onRemove:function(){return r(void 0,a)},beforeUpload:function(e){return r(e,a),!1},fileList:n?n.size?[n]:[Ce(n)]:n,accept:"image/png, image/jpeg",children:Object(c.jsx)(H.a,{icon:Object(c.jsx)(ye.a,{}),children:null!==i&&void 0!==i?i:"Select Image"})})]}),Object(c.jsxs)(ge.a,{span:12,style:{display:"grid",gap:"5px"},children:[Object(c.jsx)("label",{children:"Music:"}),Object(c.jsx)(ve.a,{onRemove:function(){return s(void 0,a)},beforeUpload:function(e){return s(e,a),!1},fileList:o?o.size?[o]:[Ce(o)]:o,accept:"audio/mpeg",children:Object(c.jsx)(H.a,{icon:Object(c.jsx)(ye.a,{}),children:null!==i&&void 0!==i?i:"Select Music"})})]})]})},we=n(480),Se=n(481),Fe=n(478),Ee=function(e){var t=e.props,n=t.refForm,r=t.imgList,a=t.handleImgChange,i=t.musicList,o=t.handleMusicChange;return Object(c.jsx)(_.a,{layout:"vertical",ref:n,name:"dynamic-docs-form",children:Object(c.jsx)(_.a.List,{name:"fields",children:function(e,t){var n=t.add,s=t.remove;return Object(c.jsxs)(Fe.b,{direction:"vertical",style:{width:"100%",padding:"15px 30px 0 30px",gap:"10px"},children:[e.map((function(e,t){return Object(c.jsxs)(Ie,Object(f.a)(Object(f.a)({},{field:e,remove:s}),{},{children:[Object(c.jsx)(_.a.Item,Object(f.a)(Object(f.a)({},e),{},{label:"Title",name:[e.name,"title"],rules:[{required:!0,message:"A title is required"}],hasFeedback:!0,children:Object(c.jsx)(W.a,{allowClear:!0})})),Object(c.jsx)(_.a.Item,Object(f.a)(Object(f.a)({},e),{},{label:"Subtitle:",name:[e.name,"subtitle"],children:Object(c.jsx)(W.a,{allowClear:!0})})),Object(c.jsx)(_.a.Item,Object(f.a)(Object(f.a)({},e),{},{label:"Text:",name:[e.name,"text"],children:Object(c.jsx)(W.a.TextArea,{showCount:!0,allowClear:!0})})),Object(c.jsx)(ke,{props:{img:r[t],handleImgChange:a,index:t,music:i[t],handleMusicChange:o}})]}),t)})),Object(c.jsx)(_.a.Item,{children:Object(c.jsx)(H.a,{type:"dashed",onClick:function(){return n()},block:!0,icon:Object(c.jsx)(we.a,{})})})]})}})})},Ne=function(e){var t=e.props,n=t.refForm,r=t.files,a=t.setSelectedDocs;return Object(c.jsx)(_.a,{labelAlign:"right",layout:"vertical",ref:n,name:"dynamic-docs-form",children:Object(c.jsx)(_.a.List,{name:"fields",children:function(e,t){var n=t.add,i=t.remove;return Object(c.jsxs)(Fe.b,{style:{width:"100%",padding:"30px 15px 0 15px"},direction:"vertical",children:[e.map((function(e,t){return Object(c.jsxs)(Ie,Object(f.a)(Object(f.a)({},{field:e,remove:i}),{},{children:[Object(c.jsx)(_.a.Item,Object(f.a)(Object(f.a)({},e),{},{label:"Title:",name:[e.name,"title"],fieldKey:[e.fieldKey,"title"],rules:[{required:!0,message:"A title is required"}],hasFeedback:!0,children:Object(c.jsx)(W.a,{allowClear:!0})})),Object(c.jsx)(me.a,{mode:"tags",style:{width:"100%"},placeholder:"Tags Mode",onChange:function(e){return a(e,t)},children:null===r||void 0===r?void 0:r.map((function(e){return Object(c.jsx)(me.a.Option,{value:e.id,children:e.title},e.id)}))})]}),t)})),Object(c.jsx)(_.a.Item,{children:Object(c.jsx)(H.a,{type:"dashed",onClick:function(){return n()},block:!0,icon:Object(c.jsx)(we.a,{}),children:"Add playlist"})})]})}})})},Ie=function(e){var t=e.children,n=e.field,r=e.remove;return Object(c.jsxs)(Fe.b,{direction:"vertical",style:{width:"100%",border:"1px solid #f0f0f0",borderRadius:"2px",padding:"15px 24px 15px 24px"},children:[Object(c.jsx)("div",{style:{display:"grid",placeContent:"end"},children:Object(c.jsx)(Se.a,{onClick:function(){return r(n.name)}})}),t]},n.key)},Pe=function(e){var t=e.props,n=t.file,r=t.refForm,a=t.imgList,i=t.handleImgChange,o=t.musicList,s=t.handleMusicChange;return Object(c.jsxs)(_.a,{labelAlign:"right",layout:"vertical",initialValues:{title:null===n||void 0===n?void 0:n.title,subtitle:null===n||void 0===n?void 0:n.subtitle,text:null===n||void 0===n?void 0:n.text},ref:r,children:[Object(c.jsx)(_.a.Item,{label:"Title:",name:"title",rules:[{required:!0,message:"A title is required"}],hasFeedback:!0,children:Object(c.jsx)(W.a,{allowClear:!0})}),Object(c.jsx)(_.a.Item,{label:"Subtitle:",name:"subtitle",children:Object(c.jsx)(W.a,{allowClear:!0})}),Object(c.jsx)(_.a.Item,{label:"Text:",name:"text",children:Object(c.jsx)(W.a.TextArea,{showCount:!0,allowClear:!0})}),Object(c.jsx)(ke,{props:{img:a[0],handleImgChange:i,music:o[0],handleMusicChange:s}})]})},Te=function(e){var t,n=e.props,r=n.collection,a=n.refForm,i=n.files,o=n.setSelectedDocs;return Object(c.jsxs)(_.a,{labelAlign:"right",layout:"vertical",initialValues:{title:null===r||void 0===r?void 0:r.title},ref:a,children:[Object(c.jsx)(_.a.Item,{label:"Title:",name:"title",children:Object(c.jsx)(W.a.TextArea,{showCount:!0,maxLength:100,allowClear:!0})}),Object(c.jsx)(me.a,{mode:"tags",style:{width:"100%"},placeholder:"Tags Mode",onChange:function(e){return o(e)},defaultValue:null===r||void 0===r||null===(t=r.docs)||void 0===t?void 0:t.map((function(e){return e.id})),children:null===i||void 0===i?void 0:i.map((function(e){return Object(c.jsx)(me.a.Option,{value:e.id,children:e.title},e.id)}))})]})},Le=function(e){var t=e.props,n=t.collection,r=t.file,a=t.files,i=t.visible,o=t.loading,s=t.handleClose,l=t.imgList,d=t.musicList,u=t.handleSave,j=t.handleImgChange,b=t.handleMusicChange,h=t.setSelectedDocs,O=t.mode,f=t.refForm;return Object(c.jsx)(fe.a,{centered:!0,visible:i,confirmLoading:o,onCancel:s,onOk:u,width:800,okText:O.modal===le.edit?"Save":"Create",cancelText:O.modal===le.edit?"Close":"Cancel",destroyOnClose:!0,children:O.type===de.doc?O.modal===le.edit?Object(c.jsx)(Pe,{props:{file:r,refForm:f,imgList:l,handleImgChange:j,musicList:d,handleMusicChange:b}}):Object(c.jsx)(Ee,{props:{refForm:f,imgList:l,handleImgChange:j,musicList:d,handleMusicChange:b}}):O.type===de.collection?O.modal===le.edit?Object(c.jsx)(Te,{props:{collection:n,refForm:f,files:a,setSelectedDocs:h}}):Object(c.jsx)(Ne,{props:{refForm:f,files:a,setSelectedDocs:h}}):Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("p",{children:"No Structure available"})})})},Ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new FormData;return t.append("file",e),t},ze=function(e,t,n,r){return e&&(e[r]&&!t.length&&(n[r+"Uid"]=e[r].uid),(!e[r]&&t.length||e[r]&&t.length&&e[r].uid!==t[0].uid)&&"error"!==t[0].status&&(n[r]=Ae(t[0]))),!e&&t.length&&"error"!==t[0].status&&(n[r]=Ae(t[0])),n},qe=function(e,t){var n=e.getFieldsValue();return t&&Object.keys(n).forEach((function(e){return n[e]===t[e]&&delete n[e]})),n},Me=function(){var e=Object(a.useContext)(Be),t=e.file,n=e.files,r=e.collection,i=Object(u.a)(e.mode,1)[0],o=e.submit,s=e.submitState,j=e.resetModal,b=Object(a.useRef)(),h=i.modal!==le.remove&&i.modal!==le.none,O=s.pending,f=Object(a.useState)((null===t||void 0===t?void 0:t.img)?[t.img]:[]),p=Object(u.a)(f,2),m=p[0],x=p[1],g=Object(a.useState)((null===t||void 0===t?void 0:t.music)?[t.music]:[]),v=Object(u.a)(g,2),y=v[0],C=v[1],k=Object(a.useState)([]),w=Object(u.a)(k,2),S=w[0],F=w[1],E=function(){var e=Object(d.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.current.validateFields();case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return");case 8:n=qe(b.current,i.type===de.doc?t:r),S[0]&&i.type===de.collection&&(n.docIds=S[0]),ze(t,m,n,"img"),ze(t,y,n,"music"),o(n);case 13:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.current.validateFields();case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return");case 8:t=b.current.getFieldsValue().fields,i.type===de.doc&&t.forEach((function(e,t){m[t]&&"error"!==m[t]&&(e.img=Ae(m[t])),y[t]&&"error"!==m[t]&&(e.music=Ae(y[t]))})),i.type===de.collection&&t.forEach((function(e,t){return S[t]&&(e.docIds=S[t])})),o(t);case 12:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){return x((null===t||void 0===t?void 0:t.img)?[t.img]:[])}),[null===t||void 0===t?void 0:t.img,i]),Object(a.useEffect)((function(){return C((null===t||void 0===t?void 0:t.music)?[t.music]:[])}),[null===t||void 0===t?void 0:t.music,i]),Object(c.jsx)(Le,{props:{collection:r,file:t,files:n,imgList:m,musicList:y,visible:h,loading:O,handleClose:j,handleSave:function(){i.modal===le.add?N():E()},handleImgChange:function(e,t){var n=(null===e||void 0===e?void 0:e.type)&&(["image/jpeg","image/png"].includes(e.type)?"success":"error");n&&(e.status=n,"error"===n&&(e.response="Invalid type")),i.modal===le.add&&i.type===de.doc?(t||0===t)&&x((function(n){return n[t]=e,Object(I.a)(n)})):x(e?[e]:[])},handleMusicChange:function(e,t){var n=(null===e||void 0===e?void 0:e.type)&&("audio/mpeg"===e.type?"success":"error");n&&(e.status=n,"error"===n&&(e.response="Invalid type")),i.modal===le.add&&i.type===de.doc?(t||0===t)&&C((function(n){return n[t]=e,Object(I.a)(n)})):C(e?[e]:[])},setSelectedDocs:function(e,t){return F(t||0===t?function(n){return n[t]=e,Object(I.a)(n)}:[e])},mode:i,refForm:b}})};!function(e){e[e.error=0]="error",e[e.success=1]="success",e[e.pending=2]="pending",e[e.done=3]="done"}(se||(se={})),function(e){e[e.add=0]="add",e[e.edit=1]="edit",e[e.remove=2]="remove",e[e.none=3]="none"}(le||(le={})),function(e){e[e.doc=0]="doc",e[e.collection=1]="collection",e[e.none=2]="none"}(de||(de={})),function(e){e[e.single=0]="single",e[e.multiple=1]="multiple",e[e.none=2]="none"}(ue||(ue={}));var De={modal:le.none,type:de.none,quantity:ue.none},Be=Object(a.createContext)(void 0),Re=function(){var e=Object(d.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,F({dest:k.IMG.create,payload:t,options:{JSON:!1}});case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(d.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,F({dest:k.IMG.delete,payload:t});case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ve=function(){var e=Object(d.a)(l.a.mark((function e(t,n,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,e.t0=t[n],!e.t0){e.next=7;break}return e.next=5,Re(t[n],r);case 5:t[n]=e.sent,t[n+"Status"]="success";case 7:if(e.t1=t[n+"Uid"],!e.t1){e.next=14;break}return e.next=11,Ue({id:t[n+"Uid"],docId:t.id},r);case 11:L(t.id,n),t[n+"Uid"]&&delete t[n+"Uid"],t[n+"Status"]="success";case 14:e.next=21;break;case 16:e.prev=16,e.t2=e.catch(0),t[n]&&delete t[n],t[n+"Uid"]&&delete t[n+"Uid"],t[n+"Status"]="error";case 21:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n,r){return e.apply(this,arguments)}}();var _e,We=function(e){var t,n,r=e.children,i=Object(a.useContext)(be),o=i.files,s=i.collections,b=i.hooks,h=b.check,O=h.checked,p=h.clearChecked,m=b.file,x=m.selectedFile,g=m.setSelectedFile,v=b.collection.selectedCollection,C=i.rerender,w=Object(a.useContext)(D).checkAuthorization,S=Object(a.useState)(De),E=Object(u.a)(S,2),N=E[0],L=E[1],z=function(){return L(Object(f.a)({},De))},q=N.type===de.doc&&N.quantity===ue.single&&N.modal!==le.add?o.find((function(e){return e.id===x})):void 0,M=N.type===de.collection&&N.quantity===ue.single&&N.modal!==le.add?s.find((function(e){return e.id===v})):void 0,B=q?[q.title]:M?[M.title]:N.quantity===ue.multiple?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(e=o.filter((function(e){return O.includes(e.id)})).map((function(e){return e.title}))).length?e:void 0}():void 0,R=N.type===de.doc?k.DOC:N.type===de.collection?k.COLLECTION:void 0,U=R?N.modal===le.add?R.create:N.modal===le.edit?R.update:N.modal===le.remove?R.delete:void 0:void 0,V=N.modal!==le.add&&null!==(t=null!==(n=null===q||void 0===q?void 0:q.id)&&void 0!==n?n:null===M||void 0===M?void 0:M.id)&&void 0!==t?t:void 0,_=N.type===de.doc&&N.quantity===ue.multiple?O:void 0,W=Object(a.useRef)(void 0),H=U?function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F({dest:U,payload:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}():void 0,J=y(null!==H&&void 0!==H?H:Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("Undefined fetchRequest");case 1:case"end":return e.stop()}}),e)}))),!1),G=Object(u.a)(J,3),Y=G[0],K=G[1],Q=G[2].reset,X=function(){var e=Object(f.a)({},W.current);e&&(N.modal===le.add&&function(e,t){var n;t.length?(n=P[A(e)]).push.apply(n,Object(I.a)(t)):P[A(e)].push(t)}(R,Y.value),N.modal===le.edit&&(console.log(e),e.imgStatus&&e.img&&(e.img.status=e.imgStatus),e.musicStatus&&e.music&&(e.music.status=e.musicStatus),T(R,e.id,e)),N.modal===le.remove&&function(e,t){var n=t.id,r=t.ids,c=A(e),a=P[c];P[c]=a.filter((function(e){return n?e.id!==n:!r||!r.includes(e.id)})),"docs"===c&&P.collections.forEach((function(e){var t;return n?(null===(t=e.docs)||void 0===t?void 0:t.find((function(e){return e.id===n})))&&(e.docs=e.docs.filter((function(e){return e.id!==n}))):null===r||void 0===r?void 0:r.forEach((function(t){var n;return(null===(n=e.docs)||void 0===n?void 0:n.find((function(e){return e.id===t})))&&(e.docs=e.docs.filter((function(e){return e.id!==t})))}))}))}(R,{id:V,ids:_}))},Z=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:{},N.quantity!==ue.multiple||N.modal!==le.add){e.next=4;break}return $(t),e.abrupt("return");case 4:if(Object.keys(t).length||N.modal===le.remove){e.next=6;break}return e.abrupt("return");case 6:if(N.modal===le.edit&&(n=null!==q&&void 0!==q?q:M,Object.keys(t).forEach((function(e){return n[e]===t[e]&&delete t[e]}))),Object.keys(t).length||N.modal===le.remove){e.next=9;break}return e.abrupt("return");case 9:if(V&&(t.id=V),_&&(t.ids=_),N.type!==de.doc){e.next=16;break}return e.next=14,Ve(t,"img",w);case 14:return e.next=16,Ve(t,"music",w);case 16:if(Object.keys(t).length){e.next=18;break}return e.abrupt("return");case 18:W.current=t,K(t);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.img,r=t.music,c=Object(Oe.a)(t,["img","music"]),e.prev=1,e.t0=n,!e.t0){e.next=7;break}return e.next=6,Re(n,w);case 6:c.img=e.sent;case 7:if(e.t1=r,!e.t1){e.next=12;break}return e.next=11,Re(r,w);case 11:c.music=e.sent;case 12:return e.abrupt("return",c);case 15:return e.prev=15,e.t2=e.catch(1),e.abrupt("return",c);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}()));case 2:t=e.sent,W.current=t,K(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){N.modal===le.remove&&B&&function(e){var t=e.onCancel,n=e.onOk,r=e.names;fe.a.confirm({title:r.length>1?"Are you sure you want to delete these?":"Are you sure you want to delete this?",content:r.length>1?r.map((function(e,t){return e+(t<r.length-1?", ":"")})):r[0],icon:Object(c.jsx)(pe.a,{}),okText:"Yes",okType:"danger",cancelText:"No",onOk:n,onCancel:t})}({onOk:function(){return Z()},onCancel:z,names:B})}),[N]),Object(a.useEffect)((function(){Y.pending&&j.b.loading({content:"Pending...",key:"submit"}),Y.value&&(j.b.success({content:"Successful!",key:"submit"}),X(),C(),W.current=void 0,N.modal===le.add&&N.type===de.doc&&g(Y.value[0].id),w(Y),Q(),N.modal!==le.edit&&z(),N.quantity===ue.multiple&&p()),Y.error&&(j.b.error({content:"Error!",key:"submit"}),N.modal===le.remove&&z(),w(Y),Q())}),[Y]),Object(c.jsxs)(Be.Provider,{value:{file:q,files:o,collection:M,collections:s,mode:[N,function(e){var t=e.modal,n=e.type,r=e.quantity;return L((function(e){return{modal:null!==t&&void 0!==t?t:e.modal,type:null!==n&&void 0!==n?n:e.type,quantity:null!==r&&void 0!==r?r:e.quantity}}))}],submit:Z,submitState:Y,resetModal:z,rerender:C},children:[r,Object(c.jsx)(Me,{})]})},He=n(427),Je=n(428),Ge=n(425),Ye=n(426),Ke=function(e){var t=e.value,n=e.props,r=n.setPage,a=n.pages;return Object(c.jsx)(Ge.a,{value:t,onChange:function(e,t){return r(t)},style:{position:"absolute",bottom:0,width:"100vw"},children:a.map((function(e){return Object(c.jsx)(Ye.a,Object(f.a)({},e),e.value)}))})},Qe=function(){var e=Object(a.useContext)(ce),t=e.page,n=e.setPage,r=e.pages;return Object(c.jsx)(Ke,{props:{pages:r,setPage:n},value:t})},Xe=n(477),Ze=n(458),$e=n(475),et=n(463),tt=n(444),nt=n(476),rt=n(451),ct=n(438),at=n(468),it=n(76),ot=n(452),st=(n(364),n(56)),lt=n(484),dt=n(392),ut=n(429),jt=n(483),bt=n(431),ht=n(390),Ot=n(450),ft=n(447),pt=n(448),mt=n(449),xt=n(434),gt=n(474),vt=n(430),yt=n(432),Ct=n(433),kt=function(e){if(!e)return{};var t=e.parentNode.getBoundingClientRect(),n=e.getBoundingClientRect();return{top:n.top-t.top+e.parentNode.scrollTop,right:n.right-t.right,bottom:n.bottom-t.bottom,left:n.left-t.left}},wt=function(e){return e<.5?2*e*e:(4-2*e)*e-1},St=function(e){var t,n=e.container,r=e.target,c=e.duration,a=e.options;return function(e){var t,n,r=e.container,c=e.to,a=e.duration,i=e.onDone,o=r.scrollTop,s=c-o,l=performance.now();!function e(){t=performance.now(),n=(t-l)/a,r.scrollTop=o+s*wt(n),n<1?window.requestAnimationFrame(e):i&&i()}()}({container:n,to:kt(r).top+(null!==(t=null===a||void 0===a?void 0:a.offsetY)&&void 0!==t?t:0),duration:c,onDone:null===a||void 0===a?void 0:a.onDone})},Ft=function(e,t,n){if(e.length<=t)return e;var r=e.substr(0,t-1);return(n?r.substr(0,r.lastIndexOf(" ")):r)+" ..."},Et=function(e){return e.sort((function(e,t){return e.title.charCodeAt(0)<=90&&t.title.charCodeAt(0)<=90?e.title.charCodeAt(0)-t.title.charCodeAt(0):e.title.charCodeAt(0)<=90?-1:t.title.charCodeAt(0)<=90?1:e.title.charCodeAt(0)-t.title.charCodeAt(0)})).reduce((function(e,t){var n=t.title[0];return!e[n]&&(e[n]=[]),e[n].push(t),e}),{})},Nt=Object(He.a)((function(e){return{chipContainer:{display:"flex",gap:".5em",marginRight:"0px"}}})),It=function(e){var t=e.className,n=e.file,r=e.props,a=r.checked,i=r.handleCheck,o=r.selectedFile,s=r.setSelectedFile,l=e.configuration,d=l.secondary,u=l.content,j=Nt();return Object(c.jsxs)(dt.a,{onClick:function(){return s(n.id)},button:!0,className:t,children:[Object(c.jsxs)(Je.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:[Object(c.jsx)(Je.a,{item:!0,children:Object(c.jsx)(ut.a,{children:Object(c.jsx)(jt.a,{variant:"rounded",children:n.id!==o?Object(c.jsx)($.a,{style:{fontSize:20}}):Object(c.jsx)(vt.a,{style:{fontSize:20}})})})}),Object(c.jsxs)(Je.a,{item:!0,children:[Object(c.jsx)(bt.a,{primary:n.title,secondary:d&&n.text?Ft(n.text,50,!0):null,style:{paddingRight:"35px"}}),Object(c.jsx)(at.a,{}),u&&Object(c.jsxs)("div",{className:j.chipContainer,children:[Object(c.jsx)($.a,{color:n.text?"inherit":"disabled"}),Object(c.jsx)(yt.a,{color:n.img?"inherit":"disabled"}),Object(c.jsx)(Ct.a,{color:n.music?"inherit":"disabled"})]})]})]}),Object(c.jsx)(xt.a,{children:Object(c.jsx)(gt.a,{edge:"end",onChange:function(){return i(n.id)},checked:null===a||void 0===a?void 0:a.includes(n.id)})})]},n.id)},Pt=function(e){var t=e.configuration,n=e.className,r=e.file,i=Object(a.useContext)(be).hooks,o=i.check,s=o.checked,l=o.addCheck,d=o.removeCheckByValue,u=i.file,j=u.selectedFile,b=u.setSelectedFile;return Object(c.jsx)(It,Object(f.a)(Object(f.a)({},{configuration:t,className:n,file:r}),{},{props:{checked:s,handleCheck:function(e){return s.includes(e)?d(e):l(e)},selectedFile:j,setSelectedFile:b}}))},Tt=n(469),Lt=n(439),At=n(440),zt=n(441),qt=n(435),Mt=n(442),Dt=n(443),Bt=n(445),Rt=n(446),Ut=n(221);!function(e){e[e.doc=0]="doc",e[e.list=1]="list",e[e.collection=2]="collection",e[e.add=3]="add"}(_e||(_e={}));var Vt=function(e){return[Object(c.jsxs)(At.a,{onClick:function(){return e({modal:le.edit,type:de.doc,quantity:ue.single})},children:[Object(c.jsx)(zt.a,{children:Object(c.jsx)(Mt.a,{fontSize:"small"})}),Object(c.jsx)(it.a,{variant:"inherit",children:"Edit"})]},_e.doc+le.edit),Object(c.jsxs)(At.a,{onClick:function(){return e({modal:le.remove,type:de.doc,quantity:ue.single})},children:[Object(c.jsx)(zt.a,{children:Object(c.jsx)(Dt.a,{fontSize:"small"})}),Object(c.jsx)(it.a,{variant:"inherit",children:"Delete"})]},_e.doc+le.remove)]},_t=function(e,t){return[Object(c.jsxs)(At.a,{onClick:function(){return e({modal:le.remove,type:de.doc,quantity:ue.multiple})},children:[Object(c.jsx)(zt.a,{children:Object(c.jsx)(Dt.a,{fontSize:"small"})}),Object(c.jsx)(it.a,{variant:"inherit",children:"Delete"})]},_e.list+le.remove),Object(c.jsx)(Ut.a,{label:Object(c.jsxs)(Je.a,{container:!0,direction:"row",children:[Object(c.jsx)(zt.a,{children:Object(c.jsx)(tt.a,{fontSize:"small"})}),Object(c.jsx)(it.a,{variant:"inherit",children:"Add"})]}),parentMenuOpen:!!t,children:Ht(e)},_e.list+le.add)]},Wt=function(e){return[Object(c.jsxs)(At.a,{onClick:function(){return e({modal:le.edit,type:de.collection,quantity:ue.single})},children:[Object(c.jsx)(zt.a,{children:Object(c.jsx)(Mt.a,{fontSize:"small"})}),Object(c.jsx)(it.a,{variant:"inherit",children:"Edit"})]},_e.collection+le.edit),Object(c.jsxs)(At.a,{onClick:function(){return e({modal:le.remove,type:de.collection,quantity:ue.single})},children:[Object(c.jsx)(zt.a,{children:Object(c.jsx)(Dt.a,{fontSize:"small"})}),Object(c.jsx)(it.a,{variant:"inherit",children:"Delete"})]},_e.collection+le.remove)]},Ht=function(e){return[Object(c.jsxs)(At.a,{onClick:function(){return e({modal:le.add,type:de.doc,quantity:ue.multiple})},children:[Object(c.jsx)(zt.a,{children:Object(c.jsx)(Bt.a,{fontSize:"small"})}),Object(c.jsx)(it.a,{variant:"inherit",children:"Song"})]},_e.add+de.doc),Object(c.jsxs)(At.a,{onClick:function(){return e({modal:le.add,type:de.collection,quantity:ue.single})},children:[Object(c.jsx)(zt.a,{children:Object(c.jsx)(Rt.a,{fontSize:"small"})}),Object(c.jsx)(it.a,{variant:"inherit",children:"Playlists"})]},_e.add+de.collection)]},Jt=function(e){var t=e.props,n=t.handleClose,r=t.handleClick,a=t.anchorEl,i=t.size,o=t.altButton,s=t.transformOrigin,l=t.appearance;return Object(c.jsxs)(c.Fragment,{children:[o?o(r):Object(c.jsx)(ht.a,{onClick:r,size:i,children:Object(c.jsx)(qt.a,{})}),Object(c.jsxs)(Tt.a,{anchorEl:a,keepMounted:!0,open:!!a,onClose:n,TransitionComponent:Lt.a,transformOrigin:s,children:[l===_e.add&&Ht(n),l===_e.doc&&Vt(n),l===_e.list&&_t(n,a),l===_e.collection&&Wt(n)]})]})},Gt=function(e){var t=e.appearance,n=e.size,r=e.altButton,i=e.transformOrigin,o=e.id,s=Object(a.useContext)(Be),l=Object(u.a)(s.mode,2)[1],d=Object(a.useContext)(be).hooks.collection.setSelectedCollection,j=Object(a.useState)(null),b=Object(u.a)(j,2),h=b[0],O=b[1];return Object(c.jsx)(Jt,{props:{handleClose:function(e){l(e),o&&d(o),O(null)},handleClick:function(e){return O(e.currentTarget)},anchorEl:h,appearance:t,size:n,altButton:r,transformOrigin:i}})},Yt=Object(He.a)((function(e){return Object(lt.a)({accordion:{display:"flex !important"},nested:{paddingLeft:e.spacing(4)}})})),Kt=function(e){var t,n,r=e.collection,a=e.open,i=e.onClick,o=e.configuration,s=Yt();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(dt.a,{className:s.accordion,children:[Object(c.jsx)(ut.a,{children:Object(c.jsx)(jt.a,{variant:"rounded",children:a?Object(c.jsx)(ft.a,{style:{fontSize:20}}):Object(c.jsx)(Z.a,{style:{fontSize:20}})})}),Object(c.jsx)(bt.a,{primary:r.title}),!!(null===(t=r.docs)||void 0===t?void 0:t.length)&&Object(c.jsx)(ht.a,{size:"small",onClick:i,children:a?Object(c.jsx)(pt.a,{}):Object(c.jsx)(mt.a,{})}),Object(c.jsx)(Gt,{appearance:_e.collection,size:"small",id:r.id})]}),!!(null===(n=r.docs)||void 0===n?void 0:n.length)&&Object(c.jsx)(Ot.a,{in:a,timeout:"auto",unmountOnExit:!0,children:Object(c.jsx)(ct.a,{component:"div",disablePadding:!0,children:r.docs.map((function(e){return Object(c.jsx)(Pt,{className:s.nested,file:e,configuration:o},e.id)}))})})]})},Qt=function(e){var t=e.collection,n=e.configuration,r=Object(st.a)(),i=Object(u.a)(r,3),o=i[0],s=i[2],l=s.toggle,d=s.setFalse;return Object(a.useEffect)((function(){var e;return!(null===(e=t.docs)||void 0===e?void 0:e.length)&&d()})),Object(c.jsx)(Kt,Object(f.a)({},{collection:t,configuration:n,open:o,onClick:l}))},Xt=n(119),Zt=function(e){var t=e.list,n=e.collections,r=e.configuration;return Object(c.jsxs)(c.Fragment,{children:[n.map((function(e){return Object(c.jsx)(Qt,{collection:e,configuration:r},e.id)})),Object.entries(t).length?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(rt.a,{}),Object.entries(t).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(c.jsxs)(ct.a,{dense:r.dense,id:"group-"+n.charCodeAt(0),children:[Object(c.jsx)(at.a,{pl:2,children:Object(c.jsx)(it.a,{color:"textSecondary",variant:"caption",display:"block",children:n})}),Object(c.jsx)(rt.a,{}),a.map((function(e){return Object(c.jsx)(Pt,{file:e,configuration:r},e.id)}))]},n+"List")}))]}):Object(c.jsx)(at.a,{style:{display:"grid",placeContent:"center",height:"80%"},children:Object(c.jsx)(Xt.a,{image:Xt.a.PRESENTED_IMAGE_SIMPLE,description:Object(c.jsx)("span",{children:"No songs"}),children:Object(c.jsx)(Gt,{altButton:function(e){return Object(c.jsx)(ot.a,{onClick:e,variant:"contained",color:"primary",size:"large",children:Object(c.jsx)(tt.a,{})})},appearance:_e.add})})})]})},$t=function(e){var t=e.list,n=e.configuration,r=Object(a.useContext)(be).collections;return Object(c.jsx)(Zt,Object(f.a)({},{list:t,configuration:n,collections:r}))},en=n(453),tn=n(454),nn=n(455),rn=n(456),cn=n(457),an=Object(He.a)((function(e){return{root:{position:"absolute",display:"flex",alignItems:"end",bottom:e.spacing(2),right:"calc(25vw - 40px)",gap:e.spacing(2)}}})),on=function(e){var t=an();return Object(c.jsx)(at.a,{className:t.root,children:e.children})},sn=function(e){return Object(c.jsx)(on,Object(f.a)({},e))},ln=n(210),dn=n.n(ln),un=Object(He.a)((function(e){return{fabBoxRel:{position:"relative"},scrollBox:{overflowY:"scroll",height:"calc(100vh - 50px)"},alignCard:Object(N.a)({minHeight:"100%",display:"grid",placeContent:"center"},e.breakpoints.down("sm"),{padding:e.spacing(0,4,0,4)}),card:{minWidth:"45ch",maxWidth:"90ch"},cardContent:{whiteSpace:"pre-line"},audioBox:{display:"grid",placeContent:"center"}}})),jn=function(e){var t=e.file,n=e.style,r=e.edit,a=e.remove,i=e.props.refMounted,o=un();return Object(c.jsx)(at.a,{className:o.fabBoxRel,children:Object(c.jsxs)(at.a,{className:o.scrollBox,children:[Object(c.jsx)(at.a,{className:o.alignCard,style:n,children:t?Object(c.jsxs)(en.a,{className:o.card,children:[Object(c.jsx)(tn.a,{title:t.title,subheader:t.subtitle&&t.subtitle,action:Object(c.jsx)(Gt,{appearance:_e.doc})}),t.img&&Object(c.jsx)(nn.a,{component:"img",width:"100%",image:C+t.img.url}),t.music&&Object(c.jsx)(at.a,{className:o.audioBox,children:Object(c.jsx)(rn.a,{children:Object(c.jsx)(dn.a,{src:C+t.music.url,controls:!0})})}),t.text&&Object(c.jsx)(cn.a,{className:o.cardContent,children:Object(c.jsx)(it.a,{paragraph:!0,children:t.text})})]}):Object(c.jsx)(at.a,{className:o.alignCard,style:n,children:Object(c.jsx)(Xt.a,{description:Object(c.jsx)("span",{children:"Waiting on a song..."})})})}),t&&(r||a)&&Object(c.jsxs)(sn,{children:[a&&Object(c.jsx)(Ze.a,{color:"secondary",size:"small","aria-label":"edit",onClick:a,children:Object(c.jsx)(Dt.a,{})}),r&&Object(c.jsx)(Ze.a,{color:"primary",size:"small","aria-label":"edit",onClick:r,children:Object(c.jsx)(Mt.a,{})})]}),Object(c.jsx)("div",{ref:i})]})})},bn=function(){var e=Object(a.useContext)(be),t=e.files,n=e.hooks.file.selectedFile,r=Object(a.useContext)(D).refMounted,i=Object(a.useContext)(Be),o=Object(u.a)(i.mode,2)[1],s=t.find((function(e){return e.id===n}));return Object(c.jsx)(jn,{file:s,edit:function(){return o({modal:le.edit,type:de.doc,quantity:ue.single})},remove:function(){return o({modal:le.remove,type:de.doc,quantity:ue.single})},props:{refMounted:r}})},hn=n(459),On=n(460),fn=n(461),pn=n(462),mn=n(473),xn=Object(He.a)((function(e){return{root:{flexGrow:1},toolbar:{display:"grid",gridAutoFlow:"column",paddingTop:e.spacing(1),paddingBottom:e.spacing(2)}}})),gn=function(e){var t=e.props,n=t.dense,r=t.toggleDense,a=t.secondary,i=t.toggleSecondary,o=t.content,s=t.toggleContent,l=t.drawer,d=t.setFalse,u=t.setTrue,j=xn();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:j.root,children:Object(c.jsx)(hn.a,{position:"static",color:"inherit",variant:"outlined",children:Object(c.jsxs)(On.a,{className:j.toolbar,children:[Object(c.jsx)(ot.a,{onClick:u,children:"Appearance"}),Object(c.jsx)("div",{style:{justifySelf:"end"},children:Object(c.jsx)(Gt,{appearance:_e.list})})]})})}),Object(c.jsxs)(mn.a,{title:"Basic Drawer",placement:"left",closable:!1,onClose:d,visible:l,children:[Object(c.jsx)(fn.a,{control:Object(c.jsx)(pn.a,{checked:n,onChange:r}),label:"Dense",labelPlacement:"top"}),Object(c.jsx)(fn.a,{control:Object(c.jsx)(pn.a,{checked:a,onChange:i}),label:"Text",labelPlacement:"top"}),Object(c.jsx)(fn.a,{control:Object(c.jsx)(pn.a,{checked:o,onChange:s}),label:"Content",labelPlacement:"top"})]})]})},vn=function(e){var t=e.props,n=Object(st.a)(void 0),r=Object(u.a)(n,3),a=r[0],i=r[2],o=i.setFalse,s=i.setTrue;return Object(c.jsx)(gn,{props:Object(f.a)({drawer:a,setFalse:o,setTrue:s},t)})},yn=n(485),Cn=Object(He.a)((function(e){return{root:{height:"50vh",position:"fixed"},markLabel:{marginLeft:-e.spacing(4)},rail:{backgroundColor:"#aaa"},thumb:{backgroundColor:"#555",height:6,width:6,margin:"0 -2.5px -2.5px -2.5px !important"}}})),kn=function(e){var t=e.marks,n=e.handleChange,r=Cn(),a=r.root,i=Object(Oe.a)(r,["root"]);return t.length?Object(c.jsx)("div",{className:a,children:Object(c.jsx)(yn.a,{orientation:"vertical",defaultValue:t.length,max:t.length,min:1,marks:t,classes:i,track:!1,onChange:n},"slider-"+t.length)}):Object(c.jsx)(c.Fragment,{})},wn=function(e){var t,n=e.list,r=(t=n).map((function(e){return{label:e[0],value:t.length-e[1]}}));return Object(c.jsx)(kn,{marks:r,handleChange:function(e,t){var n,c,a,i=null===(n=r.find((function(e){return e.value===t})))||void 0===n?void 0:n.label;i&&St({container:document.querySelector(".list"),target:document.querySelector("#group-".concat(i.charCodeAt(0))),duration:300,options:{offsetY:-(null!==(c=null===(a=document.querySelector(".list"))||void 0===a?void 0:a.clientHeight)&&void 0!==c?c:0)/4}})}})},Sn=Object(He.a)((function(e){return{root:{height:"calc( 100vh - 50px )"},fabBocRel:{position:"relative"},folderAligner:Object(N.a)({display:"grid",placeContent:"center"},e.breakpoints.down("sm"),{padding:e.spacing(0,4,0,4)}),inheritHeight:{height:"inherit"},fullWidth:{width:"100%"},listContainer:{height:"inherit",paddingTop:e.spacing(4)},folder:{minWidth:"45ch",width:"50vw",maxWidth:"90ch"}}})),Fn=function(e){var t=e.props,n=t.files,r=t.dense,a=t.toggleDense,i=t.secondary,o=t.toggleSecondary,s=t.content,l=t.toggleContent,d=t.listContainer,u=t.setListContainer,j=t.reload,b=Sn();return Object(c.jsxs)(Je.a,{container:!0,className:b.root,children:[Object(c.jsxs)(Je.a,{item:!0,xs:12,md:6,className:"".concat(b.inheritHeight," ").concat(b.fabBocRel),children:[Object(c.jsx)(Je.a,{ref:u,className:"list ".concat(b.folderAligner," ").concat(b.inheritHeight),children:Object(c.jsxs)(Je.a,{container:!0,direction:"row",className:"".concat(b.inheritHeight," ").concat(b.folder),children:[Object(c.jsx)(Je.a,{className:b.fullWidth,children:Object(c.jsx)(nt.a,{target:function(){return d},children:Object(c.jsx)(vn,{props:{dense:r,toggleDense:a,secondary:i,toggleSecondary:o,content:s,toggleContent:l}})})}),Object(c.jsxs)(Je.a,{container:!0,className:b.listContainer,spacing:4,children:[Object(c.jsx)(Je.a,{item:!0,xs:11,children:Object(c.jsx)($t,{list:Et(n),configuration:{dense:r,secondary:i,content:s}})}),Object(c.jsx)(Je.a,{item:!0,xs:1,children:Object(c.jsx)(wn,{list:Object.keys(Et(n)).map((function(e,t){return[e,t]}))})})]})]})}),Object(c.jsxs)(sn,{children:[Object(c.jsx)(Xe.a,{title:"Refresh","aria-label":"Refresh",children:Object(c.jsx)(Ze.a,{onClick:j,color:"default",size:"small",children:Object(c.jsx)(et.a,{})})}),Object(c.jsx)(Gt,{transformOrigin:{vertical:"bottom",horizontal:"left"},appearance:_e.add,altButton:function(e){return Object(c.jsx)(Ze.a,{onClick:e,color:"primary",size:"small",children:Object(c.jsx)(tt.a,{})})}})]})]}),Object(c.jsx)($e.a,{smDown:!0,children:Object(c.jsx)(Je.a,{item:!0,md:6,children:Object(c.jsx)(bn,{})})})]})},En=function(){var e=Object(a.useContext)(be),t=e.files,n=e.reload,r=Object(st.a)(),i=Object(u.a)(r,3),o=i[0],s=i[2].toggle,l=Object(st.a)(),d=Object(u.a)(l,3),j=d[0],b=d[2].toggle,h=Object(st.a)(),O=Object(u.a)(h,3),f=O[0],p=O[2].toggle,m=Object(a.useState)(null),x=Object(u.a)(m,2),g=x[0],v=x[1];return Object(c.jsx)(Fn,{props:{files:t,dense:o,toggleDense:s,secondary:j,toggleSecondary:b,content:f,toggleContent:p,listContainer:g,setListContainer:v,reload:n}})},Nn=n(465),In=n(464),Pn=Object(He.a)((function(e){return{root:{display:"grid",placeContent:"center",height:"90vh"},card:{padding:e.spacing(3,2),minWidth:"50ch"},name:{display:"grid",placeContent:"center",height:"125px",width:"100%",padding:e.spacing(0,0,1,0)},avatar:{width:e.spacing(4),height:e.spacing(4)},actionBox:{display:"grid",placeContent:"center",padding:e.spacing(6,0,0,0)},warningLink:{color:"#ff9800"},disabledLink:{color:"#64b5f6"}}})),Tn=function(e){var t=e.logout,n=e.username,r=e.handleUsername,a=e.handleEmail,i=e.handlePassword,o=Pn(),s={underline:"none",component:"button",disabled:!0,className:o.disabledLink};return Object(c.jsx)(at.a,{className:o.root,children:Object(c.jsxs)(en.a,{className:o.card,children:[Object(c.jsx)(tn.a,{avatar:Object(c.jsx)(jt.a,{className:o.avatar}),title:Object(c.jsx)(it.a,{variant:"subtitle1",children:"User"}),action:Object(c.jsx)(Xe.a,{title:"Logout","aria-label":"loguot",children:Object(c.jsx)(ht.a,{onClick:t,children:Object(c.jsx)(In.a,{})})})}),Object(c.jsx)(nn.a,{className:o.name,children:Object(c.jsx)(it.a,{variant:"h5",children:n})}),Object(c.jsx)(cn.a,{children:Object(c.jsxs)(ct.a,{children:[Object(c.jsx)(rt.a,{}),Object(c.jsxs)(dt.a,{children:[Object(c.jsx)(bt.a,{children:"Username"}),Object(c.jsx)(xt.a,{children:r?Object(c.jsx)(Nn.a,{children:"Update"}):Object(c.jsx)(Nn.a,Object(f.a)(Object(f.a)({},s),{},{children:"Update"}))})]}),Object(c.jsx)(rt.a,{}),Object(c.jsxs)(dt.a,{children:[Object(c.jsx)(bt.a,{children:"Email"}),Object(c.jsx)(xt.a,{children:a?Object(c.jsx)(Nn.a,{className:o.warningLink,children:"Change"}):Object(c.jsx)(Nn.a,Object(f.a)(Object(f.a)({},s),{},{children:"Change"}))})]}),Object(c.jsx)(rt.a,{}),Object(c.jsxs)(dt.a,{children:[Object(c.jsx)(bt.a,{children:"Password"}),Object(c.jsx)(xt.a,{children:i?Object(c.jsx)(Nn.a,{className:o.warningLink,children:"Change"}):Object(c.jsx)(Nn.a,Object(f.a)(Object(f.a)({},s),{},{children:"Change"}))})]})]})}),Object(c.jsxs)(rn.a,{className:o.actionBox,children:[Object(c.jsx)(ot.a,{color:"primary",variant:"contained",size:"small",startIcon:Object(c.jsx)(In.a,{}),onClick:t,children:"Logout"}),Object(c.jsx)(ot.a,{color:"secondary",variant:"text",size:"small",disabled:!0,children:"Delete"})]})]})})},Ln=function(){var e=Object(a.useContext)(D).logout,t=Object(a.useContext)(be).user.username;return Object(c.jsx)(Tn,Object(f.a)({},{logout:e,username:t,handleEmail:void 0,handleUsername:void 0,handlePassword:void 0}))},An=Object(He.a)((function(e){return{root:{height:"100vh"}}})),zn=function(e){var t=e.page,n=An();return Object(c.jsxs)(Je.a,{className:n.root,children:[Object(c.jsx)("div",{style:t===M.folder?{}:{display:"none"},children:Object(c.jsx)(En,{})}),Object(c.jsx)("div",{style:t===M.selected?{}:{display:"none"},children:Object(c.jsx)(bn,{})}),t===M.user&&Object(c.jsx)(Ln,{}),Object(c.jsx)(Qe,{})]})},qn=function(e){e.props;var t=Object(a.useContext)(ce).page;return Object(c.jsx)(zn,{page:t})},Mn=function(e){return Object(c.jsx)(Q,{children:Object(c.jsx)(ae,{children:Object(c.jsx)(he,{children:Object(c.jsx)(We,{children:Object(c.jsx)(qn,Object(f.a)({},e))})})})})},Dn=(n(366),n(194),function(e){return Object(c.jsx)(Mn,{props:e})}),Bn=(n(367),n(212)),Rn=n.n(Bn),Un=window.matchMedia("(prefers-reduced-motion: reduce)"),Vn=function(){var e=Object(a.useState)(Un.matches),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=function(){return r(Un.matches)};return e(),Un.addEventListener("change",e),function(){Un.removeEventListener("change",e)}})),n},_n=n(213),Wn=n.n(_n),Hn=function(e){return e?{type:"Bars",color:"#6c757d",height:175,width:175}:{type:"ThreeDots",color:"#6c757d",height:100,width:100}},Jn=function(e){var t=e.loading,n=Vn();return t?Object(c.jsx)("div",{style:{position:"absolute",top:0,left:0,background:"#F5F5F5"},children:Object(c.jsx)("div",{style:{display:"grid",height:"100vh",width:"100vw",placeContent:"center"},children:Object(c.jsx)(Wn.a,Object(f.a)({},Hn(!n)))})}):Object(c.jsx)(c.Fragment,{})},Gn=Object(He.a)((function(e){return{root:{display:"grid",placeContent:"center",height:"90vh"},card:{padding:e.spacing(3,2),maxWidth:"80ch"}}})),Yn=function(e){console.log(e)},Kn=function(e){return{validator:function(){return e?Promise.reject(e):Promise.resolve()}}},Qn=function(e){var t=e.refForm,n=e.handleFinish,r=e.toggleForm,a=e.submitState,i=e.refMounted,o=(e.customErrors,e.onValuesChange,_.a.useForm()),s=Object(u.a)(o,1)[0];return t.current=s,Object(c.jsxs)(_.a,{form:s,name:"normal_login",className:"form",onFinish:n,ref:i,children:[Object(c.jsx)(_.a.Item,{name:"email",rules:[{required:!0,message:"Please input your Email!"}],children:Object(c.jsx)(W.a,{prefix:Object(c.jsx)(R.a,{}),placeholder:"Email"})}),Object(c.jsx)(_.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(c.jsx)(W.a.Password,{prefix:Object(c.jsx)(U.a,{}),type:"password",placeholder:"Password"})}),Object(c.jsxs)(_.a.Item,{children:[Object(c.jsx)(H.a,{type:"primary",htmlType:"submit",className:"form-button",loading:a.pending,children:"Log in"}),r&&Object(c.jsxs)(at.a,{children:["Or ",Object(c.jsx)(Nn.a,{onClick:r,children:"register now!"})]})]}),Object(c.jsx)(_.a.Item,{style:{display:"grid",placeContent:"center"},children:Object(c.jsx)(Rn.a,{clientId:"597147752554-jjahlt7diu2b3v48gbldo8hq1bl2ovu3.apps.googleusercontent.com",buttonText:"Login",onSuccess:Yn,onFailure:Yn,cookiePolicy:"single_host_origin",disabled:!0})})]})},Xn=function(e){var t=e.refForm,n=e.handleFinish,r=e.toggleForm,a=(e.submitState,e.refMounted),i=e.customErrors,o=e.onValuesChange,s=_.a.useForm(),l=Object(u.a)(s,1)[0];return t.current=l,Object(c.jsxs)(_.a,{form:l,name:"register",initialValues:{remember:!0},onFinish:n,layout:"vertical",className:"form-register",ref:a,onValuesChange:o,children:[Object(c.jsx)(_.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"},Kn(null===i||void 0===i?void 0:i.email)],children:Object(c.jsx)(W.a,{prefix:Object(c.jsx)(R.a,{})})}),Object(c.jsx)(_.a.Item,{name:"username",label:"Username",rules:[{required:!0,message:"Please input an username!"},Kn(null===i||void 0===i?void 0:i.username)],children:Object(c.jsx)(W.a,{prefix:Object(c.jsx)(V.a,{})})}),Object(c.jsx)(_.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"},Kn(null===i||void 0===i?void 0:i.password)],hasFeedback:!0,children:Object(c.jsx)(W.a.Password,{prefix:Object(c.jsx)(U.a,{})})}),Object(c.jsx)(_.a.Item,{name:"confirm",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&t("password")!==n?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}],children:Object(c.jsx)(W.a.Password,{prefix:Object(c.jsx)(U.a,{})})}),Object(c.jsxs)(_.a.Item,{children:[Object(c.jsx)(H.a,{type:"primary",htmlType:"submit",className:"form-button",children:"Register"}),"Or ",Object(c.jsx)(Nn.a,{onClick:r,children:"login"})]})]})},Zn=function(e){var t=e.authState,n=e.toggleForm,i=e.handleFinish,o=e.submitState,s=e.refMounted,l=e.error,d=l.customErrors,u=l.removeError,j=Object(a.useRef)(void 0),b=Gn();Object(a.useEffect)((function(){j.current&&j.current.validateFields(Object.keys(d))}),[d]);var h={refForm:j,handleFinish:i,toggleForm:n,submitState:o,refMounted:s,customErrors:d,onValuesChange:function(e){return Object.keys(e).forEach((function(e){return u(e)}))}};return t===r.authorized?Object(c.jsx)(Dn,{refMounted:s}):t===r.loading?Object(c.jsx)(Jn,{loading:s}):Object(c.jsx)(at.a,{className:b.root,children:Object(c.jsxs)(en.a,{className:b.card,children:[t===r.login&&Object(c.jsx)(Qn,Object(f.a)({},h)),t===r.register&&Object(c.jsx)(Xn,Object(f.a)({},h))]})})},$n=function(){var e=Object(a.useContext)(D),t=e.authState,n=e.setAuthState,i=e.submit,o=e.submitState,s=e.refMounted,l=e.customErrors,d=e.removeError;return Object(c.jsx)(Zn,{authState:t,toggleForm:function(){return n(t===r.login?r.register:r.login)},handleFinish:i,submitState:o,refMounted:s,error:{customErrors:l,removeError:d}})};o.a.render(Object(c.jsx)(B,{children:Object(c.jsx)($n,{})}),document.getElementById("root"))}},[[387,1,2]]]);
//# sourceMappingURL=main.a35235f7.chunk.js.map